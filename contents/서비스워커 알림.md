---
date: '2022-08-29'
title: '서비스워커 알림(Service Worker Notification)'
categories: ['React']
summary: 'Service worker를 이용한 알림 만들기 & 한 번만 새로고침하기'
thumbnail: './WebWorkerTimer/20220825_233652.jpg'
---

### Notification

### 새로고침

---

> ##### React

```js
// service-worker.js

self.addEventListener('notificationclick', (event) => {
  event.notification.close();
  event.waitUntil(
    clients
      .matchAll({ type: 'window', includeUncontrolled: true })
      .then((clientList) => {
        if (clientList.length) {
          clientList[0].focus();
        }
      })
      .then(event.notification.close())
  );
});
```

```js
// React

const notificationRequest = () =>
  Notification.requestPermission((permission) => {
    if (permission === 'denied') {
      window.alert('Please allow notifications access to continue');
    }
  });
const notificationOption = {
  body: 'Body',
  icon: 'icon.jpg',
  actions: [{ title: 'Check', action: 'check' }],
  tag: 'notification-tag',
  requireInteraction: true,
  renotify: true,
};

useEffect(() => {
  notificationRequest();

  navigator.serviceWorker.register(`${process.env.PUBLIC_URL}/service-worker.js`);

  navigator.serviceWorker.ready.then((registration) => {
    registration.showNotification('Title', notificationOption);
  });
}, []);
```

---

### 참고자료
