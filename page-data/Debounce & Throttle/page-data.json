{"componentChunkName":"component---src-templates-post-template-tsx","path":"/Debounce & Throttle/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h3>Debounce &#x26; Throttle</h3>\n<p><strong>디바운스(Debounce)</strong> 는 이벤트를 그룹화하여 마지막 함수만 호출되도록 하는 이벤트 제어 기술입니다.</p>\n<p>이벤트 발생 후 일정 시간 동안 이벤트가 발생하지 않을 때, 콜백 함수를 호출합니다.</p>\n<br>\n<p><strong>쓰로틀(Throttle)</strong> 은 일정 시간 동안 함수를 한 번만 호출되도록 하는 이벤트 제어 기술입니다.</p>\n<p>이벤트 발생 후 일정 시간 동안 모든 이벤트를 무시하고, 이후 콜백 함수를 호출합니다.</p>\n<br>\n<p>보통 Change event나 Scroll event에서 낭비를 줄이고, 성능 저하를 방지하기 위해 사용합니다.</p>\n<p>자바스크립트와 리액트에는 해당 기능을 하는 함수가 없어 직접 선언하거나 라이브러리를 이용해야 합니다.</p>\n<br>\n<p>본 게시글에서는 함수 <code class=\"language-text\">debounce()</code>와 <code class=\"language-text\">throttle()</code>을 만드는 과정, 그 과정에서 얻은 지식을 공유합니다.</p>\n<br>\n<p>우선 해당 함수를 사용할 EventListener에 대해 알아볼 것입니다.</p>\n<p>타입스크립트 개발자는 타입 선언 파일과 친해야 한다고 합니다.</p>\n<p>F12를 눌러 우리 친구 <strong>d.ts</strong> 를 보러 갑시다.</p>\n<hr>\n<h3>EventListener Type</h3>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">,</span> listener<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>먼저 자바스크립트 <code class=\"language-text\">addEventListener()</code> 메서드의 listener 타입입니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">// lib.dom.d.ts</span>\r\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">EventListenerOrEventListenerObject</span> <span class=\"token operator\">=</span> EventListener <span class=\"token operator\">|</span> EventListenerObject<span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">EventListener</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token punctuation\">(</span>evt<span class=\"token operator\">:</span> Event<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">EventListenerObject</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token function\">handleEvent</span><span class=\"token punctuation\">(</span>object<span class=\"token operator\">:</span> Event<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>listener는 <strong>콜백 함수</strong>, 또는 <strong>handleEvent() 메서드(콜백 함수)를 포함하는 객체</strong>를 받습니다.</p>\n<p>그리고 해당 콜백 함수는 Event를 매개변수로 받고, 아무것도 반환하지 않습니다.</p>\n<p><br><br></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">onChange <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> listener <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>다음은 리액트 <code class=\"language-text\">onChange</code> 이벤트의 listener 타입입니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">// index.d.ts</span>\r\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">ChangeEventHandler<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token operator\">=</span> Element<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> EventHandler<span class=\"token operator\">&lt;</span>ChangeEvent<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">>></span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">EventHandler<span class=\"token operator\">&lt;</span><span class=\"token constant\">E</span> <span class=\"token keyword\">extends</span> SyntheticEvent<span class=\"token operator\">&lt;</span><span class=\"token builtin\">any</span><span class=\"token operator\">>></span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token function\">bivarianceHack</span><span class=\"token punctuation\">(</span>event<span class=\"token operator\">:</span> <span class=\"token constant\">E</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">[</span><span class=\"token string\">'bivarianceHack'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">SyntheticEvent<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token operator\">=</span> Element<span class=\"token punctuation\">,</span> <span class=\"token constant\">E</span> <span class=\"token operator\">=</span> Event<span class=\"token operator\">></span></span>\r\n  <span class=\"token keyword\">extends</span> <span class=\"token class-name\">BaseSyntheticEvent<span class=\"token operator\">&lt;</span><span class=\"token constant\">E</span><span class=\"token punctuation\">,</span> EventTarget <span class=\"token operator\">&amp;</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> EventTarget<span class=\"token operator\">></span></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p><a href=\"https://saramkim.github.io/Variance/\" target=\"_blank\" rel=\"nofollow\">bivarianceHack?</a></p>\n<p>상당히 복잡합니다. 알아보기 쉽도록 Generic을 없애고 간소화해봅시다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">ChangeEventHandler</span> <span class=\"token operator\">=</span> EventHandler<span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">EventHandler</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>event<span class=\"token operator\">:</span> Event<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>그러니 <code class=\"language-text\">addEventListener()</code> 메서드에서 listener 타입의 첫 번째 경우와 동일합니다.</p>\n<blockquote>\n<h6>listener는 콜백 함수를 받고, 그 콜백 함수는 Event를 매개변수로 받으며 반환 값은 없습니다.</h6>\n</blockquote>\n<p>다음은 함수를 만드는 과정입니다. (리액트의 <code class=\"language-text\">onChange</code> 이벤트와 <code class=\"language-text\">console.log()</code>를 예로 합니다)</p>\n<p>먼저 함수를 호출하는 코드를 적은 후, 해당 코드에 맞게 함수를 선언해봅시다.</p>\n<hr>\n<h3>debounce()</h3>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">onChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이벤트 함수의 기본 형태입니다. 해당 listener에 debounce 함수를 적용합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">onChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span> <span class=\"token function\">debounce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>listener의 위치에 <code class=\"language-text\">debounce()</code>가 들어가면서, 본래 listener였던 콜백 함수가 debounce의 인자가 됩니다.</p>\n<p>그 다음 원하는 일정 시간(delay)을 두 번째 인자로 넘깁니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">onChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span> <span class=\"token function\">debounce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">500</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>\n<h6>그럼 이 코드가 동작하도록 함수 <code class=\"language-text\">debounce()</code>를 만들어 봅시다.</h6>\n</li>\n</ul>\n<p><br><br></p>\n<ol>\n<li>매개변수를 입력합니다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">debounce</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">callback<span class=\"token punctuation\">,</span> delay</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></code></pre></div>\n<ol start=\"2\">\n<li>listener는 콜백 함수를 받으므로, 콜백 함수를 반환합니다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">debounce</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">callback<span class=\"token punctuation\">,</span> delay</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ol start=\"3\">\n<li>그 콜백 함수는 Event를 매개변수로 받으므로, 반환하는 콜백에 매개변수를 입력합니다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">debounce</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">callback<span class=\"token punctuation\">,</span> delay</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ol start=\"4\">\n<li>이벤트 발생 시 delay 이후에 callback을 호출하도록 합니다. 이때 event 매개변수를 <code class=\"language-text\">callback()</code>의 인자로 넘깁니다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">debounce</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">callback<span class=\"token punctuation\">,</span> delay</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> delay<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ol start=\"5\">\n<li>delay 중에 이벤트가 발생하면 기존 timer를 없애고, <code class=\"language-text\">setTimeout()</code>을 다시 실행합니다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">debounce</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">callback<span class=\"token punctuation\">,</span> delay</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">let</span> timer<span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span> <span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    tiemr <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> delay<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>완성입니다.</p>\n<br>\n<p>+ type</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">debounce</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Event<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token function-variable function\">callback</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>event<span class=\"token operator\">:</span> Event<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">,</span> delay<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">let</span> timer<span class=\"token operator\">:</span> NodeJS<span class=\"token punctuation\">.</span>Timeout<span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>event<span class=\"token operator\">:</span> Event<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span> <span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> delay<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<details>\r\n<summary>다른 선언 방법</summary>\n<br>\n<p>setTimeout 메서드의 타입을 보면 세 번째 매개변수부터는 모두 콜백의 인자로 사용되는 것을 알 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">// timer.d.ts</span>\r\n<span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">setTimeout</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>TArgs <span class=\"token keyword\">extends</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>\r\n  <span class=\"token function-variable function\">callback</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> TArgs<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">,</span>\r\n  ms<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> TArgs\r\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> NodeJS<span class=\"token punctuation\">.</span>Timeout<span class=\"token punctuation\">;</span></code></pre></div>\n<p>따라서 이렇게 선언 가능합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">debounce</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">callback<span class=\"token punctuation\">,</span> delay</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">let</span> timer<span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span> <span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>callback<span class=\"token punctuation\">,</span> delay<span class=\"token punctuation\">,</span> event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>+ type</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">debounce</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Event<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token function-variable function\">callback</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>event<span class=\"token operator\">:</span> Event<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">,</span> delay<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">let</span> timer<span class=\"token operator\">:</span> NodeJS<span class=\"token punctuation\">.</span>Timeout<span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>event<span class=\"token operator\">:</span> Event<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span> <span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>callback<span class=\"token punctuation\">,</span> delay<span class=\"token punctuation\">,</span> event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n</details>\n<hr>\n<h3>throttle()</h3>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">onChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span> <span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">500</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>\n<h6>같은 방법으로 함수 <code class=\"language-text\">throttle()</code> 또한 이 코드가 동작하도록 만들어 봅시다.</h6>\n</li>\n</ul>\n<br>\r\n<br>\n<ol>\n<li><code class=\"language-text\">debounce()</code>와 달리 delay 중에 발생하는 이벤트는 무시합니다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">callback<span class=\"token punctuation\">,</span> delay</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">let</span> timer<span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\r\n    tiemr <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> delay<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ol start=\"2\">\n<li>delay 이후 callback을 호출하고, timer의 값을 비움으로써 다음 이벤트 발생 시 <code class=\"language-text\">setTimeout()</code>이 호출되도록 합니다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">callback<span class=\"token punctuation\">,</span> delay</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">let</span> timer<span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\r\n    tiemr <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      timer <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> delay<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>완성입니다.</p>\n<br>\n<p>+ type</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">throttle</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Event<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token function-variable function\">callback</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>event<span class=\"token operator\">:</span> Event<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">,</span> delay<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">let</span> timer<span class=\"token operator\">:</span> NodeJS<span class=\"token punctuation\">.</span>Timeout <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>event<span class=\"token operator\">:</span> Event<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\r\n    timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      timer <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> delay<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br>\r\n<br>\r\n<br>\n<hr>\n<h3>참고 링크</h3>\n<ul>\n<li><a href=\"https://www.youtube.com/watch?v=Mg5dOUd8pWM\" target=\"_blank\" rel=\"nofollow\">클라이언트 개발자도 알아야 할 Debounce &#x26; Throttle</a></li>\n</ul>","frontmatter":{"title":"Debounce & Throttle 함수 만들기","summary":"Debounce & Throttle 함수를 만드는 과정, 그 과정에서 얻은 지식","date":"2022.09.18.","categories":["JS","TS","React"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAKABQDASIAAhEBAxEB/8QAGQAAAQUAAAAAAAAAAAAAAAAAAAIDBgcJ/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAdvo5b6YcAr/xAAZEAACAwEAAAAAAAAAAAAAAAAEBQABAxD/2gAIAQEAAQUCfsDgMk7dwyJlyuf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAjEAACAgIBAgcAAAAAAAAAAAABAgMEERIFEyIAFSAhIzJC/9oACAEBAAY/AqzURCXmsGNzPR5a8gTpO+deJhmki7lHyTARfnO7DwFeOnHBH32N+O5+lL0/qBD5nVrIzklW9ttVzkZ9P//EABsQAAICAwEAAAAAAAAAAAAAAAERACEQMUGB/9oACAEBAAE/IQOQMqG0CtUKoYvaFgxPCPAICEqcTbwY/9oADAMBAAIAAwAAABAYD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABwRAAEDBQAAAAAAAAAAAAAAACEBEUEQMVFhgf/aAAgBAgEBPxA5BDJqbw/af//EABwQAQEAAgIDAAAAAAAAAAAAAAERADEhQRBRcf/aAAgBAQABPxBN/KZhP6ijTLVViNwsIVhEjowWc77mriRlTl18xqqr7Fejx//Z"},"images":{"fallback":{"src":"/static/097cf7b41cefb1c48c78ec513218b998/e8b57/20220919_024155.jpg","srcSet":"/static/097cf7b41cefb1c48c78ec513218b998/9ac37/20220919_024155.jpg 100w,\n/static/097cf7b41cefb1c48c78ec513218b998/100fb/20220919_024155.jpg 200w,\n/static/097cf7b41cefb1c48c78ec513218b998/e8b57/20220919_024155.jpg 400w","sizes":"(min-width: 400px) 400px, 100vw"},"sources":[{"srcSet":"/static/097cf7b41cefb1c48c78ec513218b998/0eac4/20220919_024155.webp 100w,\n/static/097cf7b41cefb1c48c78ec513218b998/03437/20220919_024155.webp 200w,\n/static/097cf7b41cefb1c48c78ec513218b998/9b881/20220919_024155.webp 400w","type":"image/webp","sizes":"(min-width: 400px) 400px, 100vw"}]},"width":400,"height":200}},"publicURL":"/static/097cf7b41cefb1c48c78ec513218b998/20220919_024155.jpg"}}}}]}},"pageContext":{"slug":"/Debounce & Throttle/","next":{"fields":{"slug":"/Variance/"},"frontmatter":{"title":"TypeScript 타입 변성(Variance)"}},"prev":{"fields":{"slug":"/요즘 생각/"},"frontmatter":{"title":"요즘 생각"}}}},"staticQueryHashes":[]}